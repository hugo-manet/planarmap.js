

<html>
<head>
<style>
html, body {
	width: 100%;
	height: 100%;
	margin: 0;
	padding: 0;
	font-family: "Helvetica Neue", Helvetica, sans-serif;
}
#pmap {
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
}
svg path.edge {
	stroke: #404040;
	stroke-width: 0.05;
	fill: none;
}
svg path.face {
	stroke: node;
	fill: #ffaaaa;
}
svg text.label {
	pointer-events: none;
	font-family: Verdana;
	font-size: 0.3;
}
svg circle.node {
	fill: #4040d0;
}
div#title {
	z-index:101; 
	position:absolute;
	top:10px;
	left:30px;
}
#title h1 {
	color: black;
	font-weight: 300;
	font-size: 32px;
	text-rendering: optimizeLegibility;
	margin-bottom:0px;
}
</style>
</head>
<body>
	
<div id="title">
	<h1>Builder</h1>
	<p>Controls: SPACE = <a href="javascript:void(0)" onclick="doNext();">next</a>,
		mouse wheel/pinch = zoom.</p>
</div>

<div class="panelcontainer"></div>
<div id="pmap"></div>


<script charset="utf-8" src="../thirdparty/d3/d3.js"></script>
<script src="../src/geometry.js"></script>
<script src="../src/layout.js"></script>
<script src="../src/force.js"></script>
<script src="../src/planarmap.js"></script>
<script src="../src/view.js"></script>
<script src="../src/algorithms.js"></script>
<script>

var svg = d3.select("#pmap").append("svg")
	.attr("id","pmapsvg")
	.attr("width","100%")
	.attr("height","100%")
	.attr("viewBox","-8 -5 16 10")
	.attr("preserveAspectRatio", "xMidYMid meet")	
	
var planarmap = CMap.PlanarMap();
var layoutupdater = CMap.LayoutUpdater()
	.registerAll(planarmap);
planarmap.singleEdgeMap();
	
var view = CMap.View(planarmap,svg).zoom();
view.nodeText(function(node){
	return node.attr.id ;
}).updateLayers();

var force = CMap.force(planarmap)
	.centerPull({pull: true, center: new Vec2(0,0), coupling: 0.1})
	.stretchForce(true)
	.on("tick",function(){ 
		layoutupdater.attemptStretch(planarmap);
		view.updatePositions();
	})
	.resume();

d3.select("body").on("keydown",function(){
	if( d3.event.keyCode == 32 || d3.event.keyCode == 34 ) // space or page down
	{
		doNext();
	}
});

var adjlist = [[[7, 8], [9, 1], [7, 6], [3, 1], [2, 0], [1, 1]],
 [[10, 3], [0, 5], [2, 4], [2, 3], [4, 7], [22, 3], [24, 0], [23, 0], 
[15, 1]],
 [[0, 4], [5, 4], [4, 8], [1, 3], [1, 2]],
 [[5, 5], [0, 3]],
 [[5, 2], [8, 2], [14, 2], [13, 2], [4, 6], [12, 0], [4, 4], [1, 4], 
[2, 2]],
 [[8, 4], [8, 3], [4, 0], [6, 0], [2, 1], [3, 0]],
 [[5, 3]],
 [[27, 1], [18, 3], [16, 6], [16, 5], [11, 2], [8, 5], [0, 2], [9, 
0], [0, 0], [10, 1]],
 [[11, 1], [14, 0], [4, 1], [5, 1], [5, 0], [7, 5]],
 [[7, 7], [0, 1]],
 [[25, 1], [7, 9], [31, 0], [1, 0], [15, 0], [30, 0], [29, 1]],
 [[16, 4], [8, 0], [7, 4]],
 [[4, 5]],
 [[17, 2], [22, 0], [4, 3]],
 [[8, 1], [16, 3], [4, 2]],
 [[10, 4], [1, 8], [29, 2]],
 [[19, 0], [20, 0], [18, 2], [14, 1], [11, 0], [7, 3], [7, 2]],
 [[18, 1], [21, 0], [13, 0]],
 [[28, 0], [17, 0], [16, 2], [7, 1]],
 [[16, 0]],
 [[16, 1]],
 [[17, 1], [22, 1]],
 [[13, 1], [21, 1], [24, 1], [1, 5]],
 [[1, 7]],
 [[1, 6], [22, 2]],
 [[26, 1], [10, 0], [29, 0]],
 [[27, 2], [25, 0]],
 [[28, 1], [7, 0], [26, 0]],
 [[18, 0], [27, 0]],
 [[25, 2], [10, 6], [15, 2]],
 [[10, 5]],
 [[10, 2]]];
var adjlist = [[[6, 0], [2, 5], [9, 0], [1, 2]],
 [[39, 4], [37, 3], [0, 3], [8, 0], [7, 0]],
 [[5, 2], [23, 0], [10, 3], [13, 0], [3, 0], [0, 1]],
 [[2, 4], [11, 3], [4, 0], [4, 6], [12, 0], [9, 1]],
 [[3, 2], [11, 2], [17, 3], [14, 3], [33, 0], [36, 1], [3, 3], [15, 0]],
 [[42, 3], [41, 4], [2, 0], [38, 1]],
 [[0, 0]],
 [[1, 4]],
 [[1, 3], [35, 0]],
 [[0, 2], [3, 5], [35, 1]],
 [[21, 2], [22, 0], [20, 0], [2, 2]],
 [[13, 3], [17, 0], [4, 1], [3, 1]],
 [[3, 4]],
 [[2, 3], [22, 2], [19, 4], [11, 0]],
 [[16, 0], [34, 0], [33, 1], [4, 3]],
 [[4, 7]],
 [[14, 0], [25, 1], [29, 6], [32, 0], [59, 1]],
 [[11, 1], [18, 0], [25, 2], [4, 2]],
 [[17, 1]],
 [[26, 4], [26, 3], [27, 4], [24, 0], [13, 2]],
 [[10, 2]],
 [[41, 3], [65, 0], [10, 0]],
 [[10, 1], [26, 5], [13, 1]],
 [[2, 1]],
 [[19, 3], [27, 3], [29, 1], [25, 0]],
 [[24, 3], [16, 1], [17, 2]],
 [[28, 3], [84, 3], [64, 0], [19, 1], [19, 0], [22, 1]],
 [[64, 3], [63, 4], [30, 0], [24, 1], [19, 2]],
 [[41, 2], [67, 1], [85, 1], [26, 0]],
 [[31, 0], [24, 2], [30, 3], [62, 2], [61, 0], [59, 2], [16, 2]],
 [[27, 2], [81, 4], [62, 0], [29, 2], [80, 0]],
 [[29, 0]],
 [[16, 3]],
 [[4, 4], [14, 2]],
 [[14, 1]],
 [[8, 1], [9, 2], [36, 0], [52, 1]],
 [[35, 2], [4, 5], [59, 0], [58, 1], [74, 0], [57, 0]],
 [[47, 1], [38, 2], [40, 0], [1, 1], [39, 3]],
 [[44, 1], [5, 3], [37, 1], [47, 0]],
 [[50, 1], [51, 1], [47, 2], [37, 4], [1, 0], [48, 1], [49, 0]],
 [[37, 2]],
 [[66, 2], [67, 2], [28, 0], [21, 0], [5, 1], [42, 2], [42, 1], [43, 1]],
 [[43, 2], [41, 6], [41, 5], [5, 0]],
 [[45, 1], [41, 7], [42, 0], [44, 0], [46, 0]],
 [[43, 3], [38, 0], [51, 0]],
 [[66, 3], [43, 0], [50, 0]],
 [[43, 4]],
 [[38, 3], [37, 0], [39, 2]],
 [[49, 1], [39, 5], [53, 0], [52, 0], [54, 1]],
 [[39, 6], [48, 0], [90, 1]],
 [[45, 2], [39, 0], [92, 0]],
 [[44, 2], [39, 1]],
 [[48, 3], [35, 3], [55, 0], [72, 1]],
 [[48, 2]],
 [[91, 1], [48, 4], [72, 0]],
 [[52, 2], [57, 1], [73, 0], [56, 1]],
 [[72, 2], [55, 3]],
 [[36, 5], [55, 1]],
 [[74, 1], [36, 3], [76, 0], [75, 0]],
 [[36, 2], [16, 4], [29, 5], [60, 0]],
 [[59, 3], [61, 3], [77, 0], [76, 1]],
 [[29, 4], [78, 0], [79, 0], [60, 1]],
 [[30, 2], [95, 0], [29, 3]],
 [[97, 2], [81, 1], [81, 0], [100, 0], [27, 1]],
 [[26, 2], [83, 1], [97, 3], [27, 0]],
 [[21, 1]],
 [[68, 1], [69, 1], [41, 0], [45, 0]],
 [[71, 2], [28, 1], [41, 1]],
 [[69, 2], [66, 0]],
 [[70, 2], [66, 1], [68, 0]],
 [[89, 0], [88, 1], [69, 0]],
 [[88, 0], [87, 0], [67, 0]],
 [[54, 2], [52, 3], [56, 0]],
 [[55, 2], [74, 2], [93, 0]],
 [[36, 4], [58, 0], [73, 1]],
 [[58, 3], [93, 1]],
 [[58, 2], [60, 3], [94, 0]],
 [[60, 2], [79, 1], [94, 1]],
 [[61, 1]],
 [[61, 2], [77, 1]],
 [[30, 4]],
 [[63, 2], [63, 1], [96, 1], [82, 0], [30, 1]],
 [[81, 3]],
 [[84, 2], [64, 1]],
 [[86, 0], [87, 1], [83, 0], [26, 1]],
 [[86, 1], [28, 2]],
 [[84, 0], [85, 0]],
 [[71, 1], [84, 1]],
 [[71, 0], [70, 1]],
 [[70, 0]],
 [[92, 1], [49, 2], [91, 0]],
 [[90, 2], [54, 0]],
 [[50, 2], [90, 0]],
 [[73, 2], [75, 1]],
 [[76, 2], [77, 2]],
 [[62, 1]],
 [[98, 1], [81, 2]],
 [[98, 3], [98, 2], [63, 0], [64, 2]],
 [[99, 0], [96, 0], [97, 1], [97, 0]],
 [[98, 0]],
 [[63, 3]]];

var builder = CMap.buildMapFromAdjacencyList(planarmap,adjlist,0,
	[[38,2],[38,3],[44,2],[45,2]]
);

function doNext(){
	if( !builder.done() )
	{
		builder.runNext();
	}
	view.updateLayers();
}
</script>
</body>
</html>

